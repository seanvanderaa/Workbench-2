<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{% block title %}Gigafact AI{% endblock %}</title>

    <!-- App styles -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}" />
    <link rel="stylesheet" href="{{ url_for('static', filename='css/base.css') }}" />

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
</head>

<body class="">
    <div id="overlay" class="align-center hidden">
        <div class="popup-modal hidden" class="br-md p-md">
            <h3 class="">Popup Modal</h3>
            <p>Adding/editing text here.</p>
        </div>
        <div id="report-a-problem-modal" class="popup-modal br-md p-md hidden">
            <h3 class="">Report a Problem</h3>
            <p class="col-grey">Thank you for taking the time to help us improve the platform. Please let us know what is going wrong, and we'll fix it as soon as we can.</p>

            <form action="/report-problem" method="POST">
                <!-- Hidden fields populated dynamically -->
                <input type="hidden" name="user_email" id="user_email" value="">
                <input type="hidden" name="page_data" id="page_data" value="">

                <!-- Problem description -->
                 <div class="mt-sect flex-col">
                    <label for="problem_content">Please describe the issue. <span class="small-header ml-sm">Minimum of 50 characters.</span></label>
                    <textarea name="problem_content" id="problem_content" rows="4" required
                        class="w-100 br-md p-md block fs-sm" placeholder="Describe the problem here..."></textarea>
                 </div>


                <!-- Contact permission -->
                <div class="mt-sect">
                    <input type="checkbox" id="contact_permission" name="contact_permission" checked>
                    <label for="contact_permission">I would like to be contacted about this issue</label>
                </div>

                <!-- Submit -->
                <div class="flex-row mt-sect gap">
                    <button type="submit" id="submit-report-btn" class="primary-btn disabled">
                        Submit Report
                    </button>
                    <button type="button" id="close-report-btn" class="secondary-btn">
                        Cancel & Close
                    </button>
                </div>

            </form>
        </div>

    </div>
    <!-- Sidebar (offcanvas on mobile, fixed on lg+) -->
    <div class="" id="sidebar-wrapper">
        <div class="border-grey br-lg bxshd flex-col border-grey trans" id="sidebar">
            <div class="flex-row align-center" id="giga-logo">
                <h3 class="m0 p-lg mr-sm" id="gigafact-logo-text"><a class="td-none col-dblue" href="/">GIGAFACT </a></h3>
                <div class="highlight-text align-center">
                    <h3 class="m0 td-none"><a href="/" class="td-none"><span class="gradient-text">AI</span></a></h3>
                </div>
            </div>
            <div class="sidebar-actions flex-col gap">
                <a href="{{ url_for('index') }}" class="sidebar-action fw-500 p-sm trans br-sm"><i class="bi bi-plus-lg mr-sm col-muted"></i> New Claim</a>
                <a id="report-a-problem" class="sidebar-action fw-500 p-sm trans br-sm"><i class="bi bi-flag-fill mr-sm col-muted"></i> Report a Problem</a>
            </div>
            <div class="flex-col flex-btw h-100">
                <div class="flex-col">
                    <div class="processing-proj-wrapper w-100 flex-col">
                        <h4 class="small-header p-sm"><i class="bi bi-hourglass mr-sm"></i> PROCESSING</h4> <!-- Should have "col-inactive" when no claims are processing/pending-->
                        <form action="/claims" class="processing-claim br-sm flex-row trans"> <!-- Pass "active" status once the claim is ready-->
                            <button type="submit" class="processing-claim-btn m0 flex-row gap p-sm fs-xsm v-align-center"><span class="mini-loader mini-loader-dark"></span><span class="flex-1 processing-claim-btn-text">Processing claim title claim title claim title</span></button> <!-- Will use "active" status when this project is being viewed-->
                        </form>
                    </div>
                    <div class="prev-claims-wrapper w-100 flex-col">
                        <h4 class="small-header p-sm mt0"><i class="bi bi-clock-history mr-sm"></i> CLAIM HISTORY</h4>
                        <div class="prev-claims-list flex-col gap-sm">
                            <form action="/view-claim" class="flex-row flex-btw gap">
                                <input type="hidden">
                                <button class="proj-claim-btn sidebar-action w-100 p-sm br-sm flex-row gap"><span class="ht-lgreen align-center br-sm fs-xxsm truth-rating"></span>Claim Title Claim Title
                                    Claim Title</button>
                            </form>
                            <form action="/view-claim" class="flex-row flex-btw gap">
                                <input type="hidden">
                                <button class="proj-claim-btn sidebar-action w-100 p-sm br-sm active flex-row gap"><span class="ht-green align-center br-sm fs-xxsm truth-rating"></span>Claim Title Claim Title
                                    Claim Title</button>
                            </form>
                            <form action="/view-claim" class="flex-row flex-btw gap">
                                <input type="hidden">
                                <button class="proj-claim-btn sidebar-action w-100 p-sm br-sm flex-row gap"><span class="ht-red align-center br-sm fs-xxsm truth-rating"></span>Claim Title Claim Title
                                    Claim Title</button>
                            </form>
                        </div>
                    </div>
                </div>
                <div class="p-sm flex-end pos-rel">
                    <div id="user-info-wrapper" class="p-sm flex-row gap align-center trans br-md w-100">
                        <div id="user-icon" class="align-center col-white">
                            U
                        </div>
                        <div id="user-info" class="flex-btw align-center flex-row flex-1">
                            <p>Username</p>
                            <i class="bi bi-chevron-up col-muted" id="user-info-chev"></i>
                        </div>
                    </div>
                    <div class="pos-abs br-md bxshd p-sm hidden" id="user-menu">
                        <form action="/logout">
                            <button class="br-sm p-sm w-100 flex-start pointer"><i class="bi bi-box-arrow-right mr-sm"></i>Log Out</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main content -->
    <main class="main-content flex-1">
        {% block content %}
        {% set partial_template = partial if partial is defined else 'partials/_start.html' %}
        {% include partial_template %}
        {% endblock %}
    </main>
    <div class="container py-4">
        {% with msgs = get_flashed_messages() %}
        {% if msgs %}
        <div class="alert alert-info" role="alert">
            {{ msgs|join(', ') }}
        </div>
        {% endif %}
        {% endwith %}
    </div>

    {% block script %}
    <script src="{{ url_for('static', filename='js/base.js') }}"></script>
    {% endblock %}

</body>

</html>